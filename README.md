# zlox
Lox语言的zweix实现

## clox

+ 文件`common.h`是一些整个项目都需要的名称
+ 文件`memory`是关于内存控制相关的操作
+ 文件`value`是一个类似vector的实现，其类型参数为重命名为`Value`的double，用来表示向量池
+ 文件`chunk`是一个很像`value`的实现，确实，关于`code`的部分，不过上面实现的vector放在了这里作为向量池

到这里其实有三个动态数组，一个维护字节码的code，和一个维护字节码行数的line，还有一个维护常量的常量池，前两者的索引是对应的，但后者不是。

+ 文件`debug`是一个反汇编器，打印chunk的内容

+ 文件`vm`在维护一个虚拟机
  + 其中数据结构`VM`有一个chunk，像上面说的，有一个`Value`类型的stack（用数组模拟）模拟栈空间
  + 这里的`push`和`pop`即为维护栈的函数
  + 核心在函数`interpret`，它会接受一个代码文件字符串，然后“解释”它
  + IP

解释过程：先将源代码“编译”成字节码，然后解释字节码

+ 在`interpret`中，首先通过`compile`编译源代码，然后运行`run`

对于编译分成前端(在文件`scanner`中)和后端(在文件`compiler`中)

+ 文件`scanner`中
  + Token类型枚举
  + Token结构体


怎么往里塞的呢？对于常量，是操作符和常量指针，即那个常量在常量池的索引